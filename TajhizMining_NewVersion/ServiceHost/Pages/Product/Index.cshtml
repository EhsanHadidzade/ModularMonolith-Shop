@page "{id?}"
@model ServiceHost.Pages.Product.IndexModel
@{
    if (Model.Category != null)
    {
        ViewData["Title"] = Model.Category.Name;
        ViewData["Keywords"] = Model.Category.Keywords;
        ViewData["metadescription"] = Model.Category.MetaDescription;
    }
    else
    {
        ViewData["Title"] = "صفحه اصلی";
    }
}

<!--breadcrumbs area start-->
<div class="breadcrumbs_area">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumb_content">
                    <ul>
                        <li><a href="./index">خانه</a></li>
                        <li>فروشگاه</li>
                        @if (ViewData["search"] != null)
                        {
                            <li class="text-primary"> نتایج جستجو برای : @ViewData["search"]</li>
                        }
                        @if (ViewData["category"] != null)
                        {
                            <li> <a>@ViewData["category"]</a> </li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!--breadcrumbs area end-->
<!--shop  area start-->
<div class="shop_area shop_reverse mt-60 mb-60">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-12">
                <!--sidebar widget start-->
                <aside class="sidebar_widget">
                    <div class="widget_inner">
                        <div class="widget_list widget_categories">
                            <h2>دسته های محصولات</h2>
                            <ul>
                                @foreach (var category in Model.AllCategories)
                                {
                                    <li><a asp-page="index" asp-route-id="@category.Slug">@category.Name</a></li>
                                }

                            </ul>
                        </div>
                        <div class="widget_list widget_filter">
                            <h2>فیلتر با قیمت</h2>
                            <form asp-page="index" method="get">
                                <div id="slider-range"></div>
                                <input type="text" id="amount">
                                <button type="submit">فیلتر</button>
                                <input type="hidden" id="price-min" name="initPrice">
                                <input type="hidden" id="price-max" name="finalPrice">
                            </form>
                        </div>
                        <div class="widget_list">
                            <h2>مقایسه محصولات</h2>
                            <div class="recent_product_container">
                                <article class="recent_product_list">
                                    <figure>
                                        <div class="product_thumb">
                                            <a href="product-details.html"><img src="assets/img/product/product1.jpg" alt=""></a>
                                        </div>
                                        <div class="product_content">
                                            <h3><a href="product-details.html">گوشی موبایل شیائومی</a></h3>
                                            <div class="product_ratings">
                                                <ul>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                </ul>
                                            </div>
                                            <div class="price_box">
                                                <span class="old_price"> تومان</span>
                                                <span class="current_price">65,000 تومان</span>
                                            </div>
                                        </div>
                                    </figure>
                                </article>
                                <article class="recent_product_list">
                                    <figure>
                                        <div class="product_thumb">
                                            <a href="product-details.html"><img src="assets/img/product/product2.jpg" alt=""></a>
                                        </div>
                                        <div class="product_content">
                                            <h3><a href="product-details.html">هندزفری بیسیم سونی</a></h3>
                                            <div class="product_ratings">
                                                <ul>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                </ul>
                                            </div>
                                            <div class="price_box">
                                                <span class="old_price">70,000 تومان</span>
                                                <span class="current_price">65,000 تومان</span>
                                            </div>
                                        </div>
                                    </figure>
                                </article>
                                <article class="recent_product_list">
                                    <figure>
                                        <div class="product_thumb">
                                            <a href="product-details.html"><img src="assets/img/product/product24.jpg" alt=""></a>
                                        </div>
                                        <div class="product_content">
                                            <h3><a href="product-details.html">اسپیکر بلوتوثی Anker</a></h3>
                                            <div class="product_ratings">
                                                <ul>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                    <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                </ul>
                                            </div>
                                            <div class="price_box">
                                                <span class="old_price">70,000 تومان</span>
                                                <span class="current_price">65,000 تومان</span>
                                            </div>
                                        </div>
                                    </figure>
                                </article>
                            </div>
                        </div>
                        <div class="widget_list tags_widget">
                            <h2>برچسب های محصولات</h2>
                            <div class="tag_cloud">
                                @foreach (var tag in Model.Tags)
                                {
                                    <a href="/product/index?keyword=@tag">@tag</a>
                                }
                            </div>
                        </div>
                    </div>
                </aside>
                <!--sidebar widget end-->
            </div>
            <div class="col-lg-9 col-md-12">
                <!--shop wrapper start-->
                <!--shop toolbar start-->
                <div class="shop_toolbar_wrapper">
                    <div class="shop_toolbar_btn">
                        <button data-role="grid_3" type="button" class="btn-grid-3" data-toggle="tooltip" title="3"></button>
                        <button data-role="grid_4" type="button" class="btn-grid-4" data-toggle="tooltip" title="4"></button>
                        <button data-role="grid_list" type="button" class="active btn-list" data-toggle="tooltip" title="لیست"></button>
                    </div>
                    <div class="niceselect_container">
                        <form action="#">
                            <label>ترتیب:</label>
                            <select class="select_option" name="orderby" id="short">
                                <option selected value="1">امتیاز متوسط</option>
                                <option value="2">محبوبیت</option>
                                <option value="3">تعداد فروش</option>
                                <option value="4">قیمت صعودی</option>
                                <option value="5">قیمت نزولی</option>
                                <option value="6">نام محصول</option>
                            </select>
                        </form>
                    </div>
                    <div class="page_amount">
                        <p>نمایش 1-12 از 24 محصول</p>
                    </div>
                </div>
                <!--shop toolbar end-->

                <div class="row shop_wrapper grid_list">
                    @if (ViewData["searchValue"] != null)
                    {
                        <div style="direction:rtl">
                            <p style="direction:rtl">نتایچ جستجو محصولات برای : <strong class="text-info">@ViewData["searchValue"]</strong></p>
                        </div>
                    }

                    @if (Model.AllProducts.Count == 0)
                    {
                        <strong class="text-warning"> موردی یافت نشد</strong>
                    }
                    @foreach (var product in Model.AllProducts)
                    {
                        <div class="col-12 ">
                            <article class="single_product">
                                <figure>
                                    <div class="product_thumb">
                                        <a class="primary_img" asp-page="/product/productDetails" asp-route-id="@product.Slug"><img src="/UploadedFiles/@product.Picture" alt="@product.PictureAlt" title="@product.PictureTitle"></a>
                                        <a class="secondary_img" asp-page="/product/productDetails" asp-route-id="@product.Slug"><img src="/UploadedFiles/@product.Picture" alt="@product.PictureAlt" title="@product.PictureTitle"></a>
                                        @if (product.HasDiscount)
                                        {
                                            <div class="label_product">
                                                <span class="label_sale">@product.DiscountRate</span>
                                            </div>
                                        }
                                        <div class="action_links">
                                            <ul>
                                                <li class="wishlist"><a href="wishlist.html" title="افزودن به علاقه‌مندی‌ها"><i class="fa fa-heart-o" aria-hidden="true"></i></a></li>
                                                <li class="compare"><a href="#" title="مقایسه"><span class="ion-levels"></span></a></li>
                                                <li class="quick_button">
                                                    <a href="#" data-toggle="modal" data-target="#modal_box" title="مشاهده سریع"> <span class="ion-ios-search-strong"></span></a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="add_to_cart">
                                            <a href="cart.html" title="افزودن به سبد">افزودن به سبد</a>
                                        </div>
                                    </div>
                                    <div class="product_content grid_content">
                                        <div class="price_box">
                                        </div>
                                        <div class="product_ratings">
                                            <ul>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                            </ul>
                                        </div>
                                        <h2 style="font-size:18px" class="product_name grid_name"><a asp-page="/product/productDetails" asp-route-id="@product.Slug">@product.Name</a></h2>
                                    </div>
                                    <div class="product_content list_content">
                                        <div class="left_caption">
                                            <div class="price_box">
                                                @if (product.HasDiscount)
                                                {
                                                    <span class="old_price">@product.OldPrice تومان</span>
                                                    <span class="current_price">@product.Price تومان</span>
                                                }
                                                else
                                                {
                                                    <span class="current_price">@product.Price تومان</span>
                                                }
                                            </div>
                                            <h2 style="font-size:18px" class="product_name"><a asp-page="/product/productDetails" asp-route-id="@product.Slug">@product.Name</a></h2>
                                              <div class="product_ratings">
                                            <ul>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star-outline"></i></a></li>
                                            </ul>
                                        </div>
                                            <div class="product_desc">
                                              <h4 style="font-size:13px">@product.ShortDescription.Substring(0,Math.Min(product.ShortDescription.Length,100)) ...</h4>
                                            </div>
                                        </div>
                                        <div class="right_caption">
                                            <div class="add_to_cart">
                                                <a href="cart.html" title="افزودن به سبد">افزودن به سبد</a>
                                            </div>
                                            <div class="action_links">
                                                <ul>
                                                    <li class="wishlist"><a href="wishlist.html" title="افزودن به علاقه‌مندی‌ها"><i class="fa fa-heart-o" aria-hidden="true"></i>  افزودن به علاقه‌مندی‌ها</a></li>
                                                    <li class="compare"><a href="#" title="مقایسه"><span class="ion-levels"></span> مقایسه</a></li>
                                                    <li class="quick_button">
                                                        <a href="#" data-toggle="modal" data-target="#modal_box" title="مشاهده سریع"> <span class="ion-ios-search-strong"></span> نمایش سریع</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </figure>
                            </article>
                        </div>
                    }

                </div>
                <div class="shop_toolbar t_bottom">
                    <div class="pagination">
                        <ul>
                            <li class="current"><span>1</span></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li class="next"><a href="#">بعدی</a></li>
                            <li><a href="#"><i class="fa fa-angle-double-left"></i></a></li>
                        </ul>
                    </div>
                </div>
                <!--shop toolbar end-->
                <!--shop wrapper end-->
            </div>
        </div>
    </div>
</div>
<!--shop  area end-->